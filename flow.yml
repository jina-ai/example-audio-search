jtype: Flow
version: '1'
executors:
  - name: 'segmenter'
    uses: AudioSegmenter
    py_modules:
      - executors.py
  - name: 'encoder'
    uses: 'jinahub+docker://VGGishAudioEncoder/v0.4'
    uses_with:
      traversal_paths: ['c', ]
      load_input_from: 'waveform'
      min_duration: 1
    volumes:
      - './models:/workspace/models'
  - name: 'indexer'
    uses: 'jinahub://SimpleIndexer/v0.7'
    uses_with:
      match_args:
        limit: 5
        traversal_rdarray: ['c',]
        traversal_ldarray: ['c',]
  - name: ranker
    uses: MyRanker
    py_modules:
      - executors.py
